{% extends 'base.html' %}
{% load static %}
{% block content %}

<div class="container mx-auto mt-12 max-w-2xl p-8 rounded-2xl shadow-2xl backdrop-blur-lg bg-white/10 text-white">

  <!-- Header -->
  <h1 class="text-3xl font-extrabold text-center mb-2">Profile</h1>
  <p class="text-center text-white/70 mb-8">Manage your information and account</p>

  <!-- Summary Cards -->
  <div class="grid grid-cols-2 gap-4 mb-10">
    <div class="p-5 rounded-xl shadow-lg text-center border border-white/20 backdrop-blur-md bg-white/5 hover:scale-105 transition-transform duration-300">
      <p class="text-2xl font-bold text-green-400">â‚¹{{ total_spent }}</p>
      <p class="text-white/70 text-sm">Total Spent</p>
    </div>
    <div class="p-5 rounded-xl shadow-lg text-center border border-white/20 backdrop-blur-md bg-white/5 hover:scale-105 transition-transform duration-300">
      <p class="text-2xl font-bold text-blue-400">{{ total_transactions }}</p>
      <p class="text-white/70 text-sm">Transactions</p>
    </div>
  </div>

  <!-- Edit Profile -->
  <div class="p-6 rounded-2xl border border-white/20 shadow-lg backdrop-blur-md bg-white/5 mb-6">
    <h2 class="text-lg font-semibold mb-4 text-center text-white">Edit Profile</h2>

    <form method="POST" class="space-y-4">
      {% csrf_token %}
      {% if messages %}
        <div class="text-center mb-3">
          {% for message in messages %}
            <p class="text-sm {% if message.tags == 'error' %}text-red-400{% else %}text-green-400{% endif %}">
              {{ message }}
            </p>
          {% endfor %}
        </div>
      {% endif %}

      <div>
        <label class="block  text-sm font-medium text-white/80 mb-1">Username</label>
        <input type="text" name="username" value="{{ user.username }}" 
               class="w-full p-3 rounded-lg border border-white/20 bg-transparent text-white placeholder-black/50 focus:outline-none focus:ring-2 focus:ring-white/30">
      </div>

      <div>
        <label class="block text-sm font-medium text-white/80 mb-1">Email</label>
        <input type="email" name="email" value="{{ user.email }}" 
               class="w-full p-3 rounded-lg border border-white/20 bg-transparent text-white placeholder-black/50 focus:outline-none focus:ring-2 focus:ring-white/30">
      </div>

      <div class="text-center mt-5">
        <button type="submit" 
                class="bg-green-500/50 bg-green-500 text-white font-medium px-6 py-2 rounded-lg transition duration-300">
          Save Changes
        </button>
      </div>
    </form>
  </div>

  <!-- Account Actions -->
  <div class="flex flex-col sm:flex-row justify-center gap-4 text-center">
    
    <form method="POST" action="{% url 'delete_account' %}" 
          onsubmit="return confirm('Are you sure you want to permanently delete your account? This action cannot be undone.');">
      {% csrf_token %}
      <button type="submit" 
              class="bg-red-500/20 border border-red-400 text-red-400 px-6 py-2 rounded-lg hover:bg-red-500/40 hover:text-white transition duration-300">
        Delete Account
      </button>
    </form>

    <form method="post" action="{% url 'logout' %}">
      {% csrf_token %}
      <button type="submit" 
              class="bg-green-500/50 bg-red-500 hover:bg-red-800 text-white font-medium px-6 py-2 rounded-lg transition duration-300">
        Logout
      </button>
    </form>

  </div>
</div>

{% endblock %}
